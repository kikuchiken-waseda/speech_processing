=============
データベース
=============

.. toctree::
   :maxdepth: 2
   :caption: Contents:

   ./ermodel
   ./rdmodel

0. データとデータモデルとデータベース
=====================================

0.1 データ（Data）
------------------

**定義**

データとは、事実・事象・概念などを形式化した**記号列**であり、解釈主体にとって意味を持ちうる対象である。一般にデータは、構造（形式）と意味（セマンティクス）を伴う。

- 単独では意味を持たない可能性があり、文脈やスキーマによって解釈される。
- データは記録・通信・処理の対象であり、情報処理の基本単位である。

例：
- `42`, `'Alice'`, `2024-01-01` はいずれもデータであるが、構造と意味づけがなければ用途は限定される。

0.2 データモデル（Data Model）
-------------------------------

**定義**

データモデルとは、データの**構造・意味・制約・操作**を記述するための抽象的枠組みである。

- 目的は、現実世界の情報を**コンピュータ上で表現・管理・操作可能な形式**で記述すること。
- モデルには以下が含まれる：

  - 構造（Structure）：データがどのように構成されるか
  - 意味（Semantics）：データが何を意味するか
  - 制約（Constraints）：データが満たすべき条件
  - 操作（Operations）：データに対する演算（例：検索、更新、削除）

**分類**

- リレーショナルモデル（Relational Model）
- 階層モデル（Hierarchical Model）
- ネットワークモデル（Network Model）
- オブジェクト指向モデル（Object-oriented Model）
- ドキュメントモデル、グラフモデル、など

0.3 データベース（Database）
----------------------------

**定義**

データベースとは、**あるデータモデル**に基づき、意味的整合性と永続性をもって組織化された**関連データの集合**である。

- 一貫性、一意性、再利用性、共有性を備えることが要求される。
- データベースは通常、**スキーマ（構造）**と**インスタンス（内容）**の2層構造を持つ。

**備考**

- データベースは静的なデータの集まりではなく、動的な操作（問合せ、更新）を伴う。
- データベース管理システム（DBMS）は、この集合を効率的かつ安全に管理するためのソフトウェアシステムである。

0.4 データベース管理システム（DBMS: Database Management System）
-----------------------------------------------------------------

**定義**

DBMS とは、データベースを構成・操作・保守・制御するための**ソフトウェアシステム**である。

**機能的役割**

DBMS は、次のような機能を提供する：

- **定義機能**：スキーマやビューの定義
- **操作機能**：データの検索（問合せ）、挿入、削除、更新
- **制御機能**：
  - 整合性制約の保証
  - トランザクション管理（原子性・一貫性・独立性・永続性：ACID特性）
  - 同時実行制御
  - アクセス制御とセキュリティ
  - 障害回復（リカバリ）

**備考**

- DBMS はデータ独立性（論理・物理の独立）を実現し、アプリケーションとデータの分離を促進する。
- 代表的な DBMS：PostgreSQL, MySQL, Oracle Database, SQL Server など。

0.5 データベースシステム（DBS: Database System）
--------------------------------------------------

**定義**

DBS とは、**データベース（データ）**と**DBMS（ソフトウェア）**、およびそれらを運用・活用するための**ユーザーやアプリケーション**を含めた**統合的なシステム全体**を指す。

.. figure:: dbs_structure.svg
   :align: center
   :alt: DBSの構成
   :figclass: align-center

   データベースシステムの概念構成（DBS = データ + DBMS + 利用者）

**構成要素**

- **データ**：意味的に統合された構造化データの集合
- **DBMS**：操作・制御機能を提供するソフトウェア
- **アプリケーション**：DBMS を利用する業務プログラム群
- **ユーザー**：データにアクセスする主体（エンドユーザー、DB管理者など）

**備考**

- DBS は技術的構成だけでなく、利用環境・役割・責任も含む情報システムの一部とみなされる。
- 「DBMS ⊂ DBS」という包含関係が成立する。



1. スキーマとインスタンス
=========================

1.1 スキーマ（Schema）
----------------------------

**定義**

スキーマとは、データの構造を定義するメタ情報であり、対象とする世界におけるデータの種類、属性、型、関係性を記述する**設計仕様**である。

- データベースにおける「スキーマ」は、構造の青写真（blueprint）として機能する。
- スキーマは変更されにくく、**比較的静的**な構成要素である。

例：
- リレーショナルデータベースでは、各テーブルの名前、列名、列型、制約（キー制約など）からなる。

1.2 インスタンス（Instance）
----------------------------

**定義**

インスタンスとは、定義されたスキーマに基づいて、**ある時点で実際に存在する具体的なデータの集合**である。

- スキーマが構造を定義するのに対し、インスタンスはその構造に従った**実体（具体値）**である。
- インスタンスは運用中に**頻繁に変化**し得る動的な要素である。

例：
- スキーマで定義された「学生」テーブルにおける、ある時点の登録済みの学生レコード。
